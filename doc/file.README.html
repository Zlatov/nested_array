<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'><h1 id="nested_array">nested_array</h1>

<p>üéâ Congratulations! Version 3.0 has been released.</p>

<p>Gem <code>nested_array</code> allows you to convert a flat data array with a tree structure
into a nested array. It also helps to display trees by forming HTML layout or
pseudo-graphics.</p>

<p>The tree structure must be described using the Adjacency List pattern, that is, each node has an ancestor.</p>

<p><strong>Select language README.md</strong></p>

<ul>
<li>  en <a href="README.md">English</a></li>
<li>  ru <a href="README-ru.md">–†—É—Å—Å–∫–∏–π</a></li>
</ul>

<h2 id="table-of-contents"><a id="–û–≥–ª–∞–≤–ª–µ–Ω–∏–µ"></a>Table of contents</h2>

<ul>
<li>  <a href="#1">Installation</a></li>
<li>  <a href="#2">Usage</a>

<ul>
<li>  <a href="#2.1">Converting data using the <code>.to_nested</code> method</a>

<ul>
<li>  <a href="#2.1.1">Source data ‚Äì hash array</a></li>
<li>  <a href="#2.1.2">Source data ‚Äì ActiveRecord array</a></li>
<li>  <a href="#2.1.3"><code>.to_nested</code> method options</a>

<ul>
<li>  <a href="#2.1.3.1"><code>root_id: id</code></a></li>
<li>  <a href="#2.1.3.2"><code>branch_id: id</code></a></li>
</ul></li>
</ul></li>
<li>  <a href="#2.2">Displaying tree structures</a>

<ul>
<li>  <a href="#2.2.1">As multi-level lists</a>

<ul>
<li>  <a href="#2.2.1.1">Bulleted and numbered lists <code>&lt;ul&gt;</code>, <code>&lt;ol&gt;</code></a></li>
<li>  <a href="#2.2.1.2">Using your own templates to display a list</a></li>
<li>  <a href="#2.2.1.3">Changing the template depending on node data</a></li>
<li>  <a href="#2.2.1.4">Dropdown list based on <code>&lt;details&gt;&lt;/details&gt;</code> tag</a></li>
<li>  <a href="#2.2.1.5">Formation and output of your own templates based on changing the node level <code>node.level</code></a></li>
</ul></li>
<li>  <a href="#2.2.2">Pseudo-graphic output</a>

<ul>
<li>  <a href="#2.2.2.1">Adding pseudo-graphics before the model name using the <code>nested_to_options</code> method</a></li>
<li>  <a href="#2.2.2.2">Thin pseudographics</a></li>
<li>  <a href="#2.2.2.3">Own pseudographics</a></li>
<li>  <a href="#2.2.2.4">Increase indentation in own pseudographics</a></li>
</ul></li>
<li>  <a href="#2.2.3">In html forms</a>

<ul>
<li>  <a href="#2.2.3.1">With the <code>form.select</code> helper</a></li>
<li>  <a href="#2.2.3.2">With <code>form.select</code> and <code>options_for_select</code> helpers</a></li>
<li>  <a href="#2.2.3.3">Dropdown list with radio buttons <code>form.radio_button</code></a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>

<h2 id="installation"><a id="1"></a>Installation <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h2>

<ol>
<li>Add a line to your application&#39;s Gemfile:</li>
</ol>

<pre class="code ruby"><code class="ruby"><span class='comment'># Working with tree arrays
</span><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nested_array</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~&gt; 3.0</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<p>And do <code>bundle install</code>.</p>

<ol>
<li> If you plan to use modest CSS gem styles, add to
the <em>app/assets/stylesheets/application.scss</em> file:</li>
</ol>

<pre class="code css"><code class="css">/* Displaying Tree Arrays */
@import &quot;nested_array&quot;;
</code></pre>

<h2 id="usage"><a id="2"></a>Usage <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h2>

<h3 id="converting-data-using-the-to_nested-method"><a id="2.1"></a>Converting data using the <code>.to_nested</code> method <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h3>

<h4 id="source-data-hash-array"><a id="2.1.1"></a>Source data ‚Äì hash array <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h4>

<p>Let&#39;s say we have a hash array:</p>

<pre class="code rb"><code class="rb">flat = [
  {&#39;id&#39; =&gt; 3, &#39;parent_id&#39; =&gt; nil},
  {&#39;id&#39; =&gt; 2, &#39;parent_id&#39; =&gt; 1},
  {&#39;id&#39; =&gt; 1, &#39;parent_id&#39; =&gt; nil}
]
</code></pre>

<p>Where each hash is a tree node, <code>id</code> is the node identifier, <code>parent_id</code> is a
pointer to the parent node.</p>

<p>It is necessary to convert it into an array in which there will be root nodes
(<code>&#39;parent_id&#39; =&gt; nil</code>), and child nodes placed in the <code>children</code> field.</p>

<pre class="code rb"><code class="rb">nested = flat.to_nested
puts nested.pretty_inspect
</code></pre>

<p>This will output:</p>

<pre class="code ruby"><code class="ruby">[#&lt;OpenStruct id=3, parent_id=nil, level=0, origin={&quot;id&quot;=&gt;3, &quot;parent_id&quot;=&gt;nil}&gt;,
 #&lt;OpenStruct id=1, parent_id=nil, level=0, children=[#&lt;OpenStruct id=2, parent_id=1, level=1, origin={&quot;id&quot;=&gt;2, &quot;parent_id&quot;=&gt;1}&gt;], origin={&quot;id&quot;=&gt;1, &quot;parent_id&quot;=&gt;nil}&gt;]
</code></pre>

<p>As a result, nodes are <code>OpenStruct</code> objects with initial fields <code>id</code>, <code>parent_id</code> and additional fields <code>level</code>, <code>origin</code> and <code>children</code>.</p>

<p>ActiveRecord objects can also serve as source nodes.</p>

<h4 id="source-data-activerecord-array"><a id="2.1.2"></a>Source data ‚Äì ActiveRecord array <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h4>

<pre class="code rb"><code class="rb">catalogs = Catalog.all.to_a
nested = catalogs.to_nested
puts nested.pretty_inspect
</code></pre>

<p>This will output:</p>

<pre class="code ruby"><code class="ruby">[
  #&lt;OpenStruct id=1, parent_id=nil, level=0, origin=#&lt;Catalog id: 1, name: &quot;Computer Components&quot;, parent_id: nil&gt;, children=[
    #&lt;OpenStruct id=11, parent_id=1, level=1, origin=#&lt;Catalog id: 11, name: &quot;External Components&quot;, parent_id: 1&gt;, children=[
      #&lt;OpenStruct id=111, parent_id=11, level=2, origin=#&lt;Catalog id: 111, name: &quot;Hard Drives&quot;, parent_id: 11&gt;&gt;,
      #&lt;OpenStruct id=112, parent_id=11, level=2, origin=#&lt;Catalog id: 112, name: &quot;Sound Cards&quot;, parent_id: 11&gt;&gt;,
      #&lt;OpenStruct id=113, parent_id=11, level=2, origin=#&lt;Catalog id: 113, name: &quot;KVM Switches&quot;, parent_id: 11&gt;&gt;,
      #&lt;OpenStruct id=114, parent_id=11, level=2, origin=#&lt;Catalog id: 114, name: &quot;Optical Drives&quot;, parent_id: 11&gt;&gt;
    ]&gt;,
    #&lt;OpenStruct id=12, parent_id=1, level=1, origin=#&lt;Catalog id: 12, name: &quot;Internal Components&quot;, parent_id: 1&gt;&gt;
  ]&gt;,
  #&lt;OpenStruct id=2, parent_id=nil, level=0, origin=#&lt;Catalog id: 2, name: &quot;Monitors&quot;, parent_id: nil&gt;&gt;,
  #&lt;OpenStruct id=3, parent_id=nil, level=0, origin=#&lt;Catalog id: 3, name: &quot;Servers&quot;, parent_id: nil&gt;&gt;,
  #&lt;OpenStruct id=4, parent_id=nil, level=0, origin=#&lt;Catalog id: 4, name: &quot;Networking Products&quot;, parent_id: nil&gt;&gt;
]
</code></pre>

<p><sub>The <code>.to_nested</code> method uses the <code>object.serializable_hash</code> method to get a list of the object&#39;s fields.</sub></p>

<h4 id="to_nested-method-options"><a id="2.1.3"></a><code>.to_nested</code> method options <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h4>

<h5 id="root_id-id"><a id="2.1.3.1"></a><code>root_id: id</code> <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h5>

<p><code>root_id: 1</code> ‚Äî take children of node with <code>id</code> equal to <code>1</code>.</p>

<pre class="code erb"><code class="erb">&lt;% catalogs_of_1 = Catalog.all.to_a.to_nested(root_id: 1) %&gt;
&lt;ul&gt;
  &lt;% catalogs_of_1.each_nested do |node, origin| %&gt;
    &lt;%= node.before -%&gt;
    &lt;%= origin.name -%&gt; &lt;small&gt;[&lt;%= origin.id %&gt;, &lt;%= origin.parent_id || :nil %&gt;, &lt;%= node.level %&gt;]&lt;/small&gt;
    &lt;%= node.after -%&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
</code></pre>

<p>Will output a multi-level bulleted list of descendants of node #1:</p>

<p><img src="doc/images/2.1.3.1.png" alt="Screenshot"></p>

<h5 id="branch_id-id"><a id="2.1.3.2"></a><code>branch_id: id</code> <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h5>

<p><code>branch_id: 1</code> ‚Äî take the node with <code>id</code> equal to <code>1</code> and all its descendants.</p>

<pre class="code erb"><code class="erb">&lt;% catalogs_from_1 = Catalog.all.to_a.to_nested(branch_id: 1) %&gt;
&lt;ul&gt;
  &lt;% catalogs_from_1.each_nested do |node, origin| %&gt;
    &lt;%= node.before -%&gt;
    &lt;%= origin.name -%&gt; &lt;small&gt;[&lt;%= origin.id %&gt;, &lt;%= origin.parent_id || :nil %&gt;, &lt;%= node.level %&gt;]&lt;/small&gt;
    &lt;%= node.after -%&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
</code></pre>

<p>Will output node #1 and its descendants:</p>

<p><img src="doc/images/2.1.3.2.png" alt="Screenshot"></p>

<h3 id="displaying-tree-structures"><a id="2.2"></a>Displaying tree structures <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h3>

<h4 id="as-multi-level-lists"><a id="2.2.1"></a>As multi-level lists <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h4>

<h5 id="bulleted-and-numbered-lists-ul-ol"><a id="2.2.1.1"></a>Bulleted and numbered lists <code>&lt;ul&gt;</code>, <code>&lt;ol&gt;</code> <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h5>

<pre class="code erb"><code class="erb">&lt;ul&gt;
  &lt;% @catalogs.to_a.to_nested.each_nested do |node, origin| %&gt;
    &lt;%= node.before %&gt;
    &lt;%= link_to origin.name, origin %&gt; &lt;small&gt;[&lt;%= origin.id %&gt;, &lt;%= origin.parent_id || :nil %&gt;, &lt;%= node.level %&gt;]&lt;/small&gt;
    &lt;%= node.after %&gt;
  &lt;% end %&gt;
&lt;/ul&gt;

&lt;ol&gt;
  &lt;% @catalogs.to_a.to_nested.each_nested ul: &#39;&lt;ol&gt;&#39;, _ul: &#39;&lt;/ol&gt;&#39; do |node, origin| %&gt;
    &lt;%= node.before %&gt;
    &lt;%= link_to origin.name, origin %&gt; &lt;small&gt;[&lt;%= origin.id %&gt;, &lt;%= origin.parent_id || :nil %&gt;, &lt;%= node.level %&gt;]&lt;/small&gt;
    &lt;%= node.after %&gt;
  &lt;% end %&gt;
&lt;/ol&gt;
</code></pre>

<p><img src="doc/images/2.2.1.1.png" alt="Screenshot"></p>

<h5 id="using-your-own-templates-to-display-a-list"><a id="2.2.1.2"></a>Using your own templates to display a list <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h5>

<p>Instead of <code>&lt;ul&gt;&lt;li&gt;</code>/<code>&lt;ol&gt;&lt;li&gt;</code></p>

<pre class="code erb"><code class="erb">&lt;% content_for :head do %&gt;
  &lt;style&gt;
    /* Vertical node padding */
    div.li { margin: .5em 0; }
    /* Level indentation (children) */
    div.ul { margin-left: 2em; }
  &lt;/style&gt;
&lt;% end %&gt;

&lt;div class=&quot;ul&quot;&gt;
  &lt;%# Overriding opening and closing template tags. %&gt;
  &lt;% @catalogs.to_a.to_nested.each_nested(
    ul: &#39;&lt;div class=&quot;ul&quot;&gt;&#39;,
    _ul: &#39;&lt;/div&gt;&#39;,
    li: &#39;&lt;div class=&quot;li&quot;&gt;&#39;,
    _li: &#39;&lt;/div&gt;&#39;
  ) do |node, origin| %&gt;
    &lt;%= node.before -%&gt;
    &lt;%= origin.name -%&gt; &lt;small&gt;[&lt;%= origin.id %&gt;, &lt;%= origin.parent_id || :nil %&gt;, &lt;%= node.level %&gt;]&lt;/small&gt;
    &lt;%= node.after -%&gt;
  &lt;% end %&gt;
&lt;/div&gt;
</code></pre>

<p><img src="doc/images/2.2.1.2.png" alt="Screenshot"></p>

<h5 id="changing-the-template-depending-on-node-data"><a id="2.2.1.3"></a>Changing the template depending on node data <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h5>

<p>To change the output patterns depending on the node data, we can check the node
fields <code>node.li</code> and <code>node.ul</code>. If the fields are not empty, then instead of
displaying their contents, substitute your own dynamic html.</p>

<p>Output of available node templates (<code>node.li</code>, <code>node.ul</code> and <code>node._</code>):</p>

<pre class="code erb"><code class="erb">&lt;ul&gt;
  &lt;% @catalogs.to_a.to_nested.each_nested do |node, origin| %&gt;
    &lt;%= node.li -%&gt;
    &lt;%= origin.name -%&gt; &lt;small&gt;[&lt;%= origin.id %&gt;, &lt;%= origin.parent_id || :nil %&gt;, &lt;%= node.level %&gt;]&lt;/small&gt;
    &lt;%= node.ul -%&gt;
    &lt;%= node._ -%&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
</code></pre>

<p><img src="doc/images/2.2.1.3-1.png" alt="Screenshot"></p>

<p>Replacing templates with dynamic html:</p>

<pre class="code erb"><code class="erb">&lt;% content_for :head do %&gt;
  &lt;style&gt;
    li.level-0 {color: red;}
    li.level-1 {color: green;}
    li.level-2 {color: blue;}
    li.has_children {font-weight: bold;}
    ul.big {border: solid 1px gray;}
  &lt;/style&gt;
&lt;% end %&gt;

&lt;ul&gt;
  &lt;% @catalogs.to_a.to_nested.each_nested do |node, origin| %&gt;
    &lt;li class=&quot;level-&lt;%= node.level %&gt; &lt;%= &#39;has_children&#39; if node.is_has_children %&gt;&quot;&gt;
    &lt;%= origin.name %&gt; &lt;small&gt;[&lt;%= origin.id %&gt;, &lt;%= origin.parent_id || :nil %&gt;, &lt;%= node.level %&gt;]&lt;/small&gt;
    &lt;% if node.ul.present? %&gt;
      &lt;ul class=&quot;&lt;%= &#39;big&#39; if node.children.length &gt; 2 %&gt;&quot;&gt;
    &lt;% end %&gt;
    &lt;%= node._ -%&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
</code></pre>

<p><img src="doc/images/2.2.1.3-2.png" alt="Screenshot"></p>

<p>It&#39;s worth noting that the <code>node.li</code> field is always present in a node, unlike
<code>node.ul</code>.</p>

<h5 id="dropdown-list-based-on-details-details-tag"><a id="2.2.1.4"></a>Dropdown list based on <code>&lt;details&gt;&lt;/details&gt;</code> tag <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h5>

<pre class="code erb"><code class="erb">&lt;ul class=&quot;nested_array-details&quot;&gt;
  &lt;% @catalogs.to_a.to_nested.each_nested details: true do |node, origin| %&gt;
    &lt;%= node.before %&gt;
    &lt;%= origin.name %&gt; &lt;small&gt;[&lt;%= origin.id %&gt;, &lt;%= origin.parent_id || :nil %&gt;, &lt;%= node.level %&gt;]&lt;/small&gt;
    &lt;%= node.after %&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
</code></pre>

<p><img src="doc/images/2.2.1.4-1.png" alt="Screenshot"></p>

<p>By default, sublevels are hidden; you can control the display of sublevels by passing an option to the node method: <code>node.after(open: ...)</code>:</p>

<pre class="code erb"><code class="erb">&lt;ul class=&quot;nested_array-details&quot;&gt;
  &lt;% @catalogs.to_a.to_nested.each_nested details: true do |node, origin| %&gt;
    &lt;%= node.before %&gt;
    &lt;%= origin.name %&gt; &lt;small&gt;[&lt;%= origin.id %&gt;, &lt;%= origin.parent_id || :nil %&gt;, &lt;%= node.level %&gt;]&lt;/small&gt;
    &lt;%= node.after(open: node.is_has_children) %&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
</code></pre>

<p><img src="doc/images/2.2.1.4-2.png" alt="Screenshot"></p>

<h5 id="formation-and-output-of-your-own-templates-based-on-changing-the-node-level-node-level"><a id="2.2.1.5"></a>Formation and output of your own templates based on changing the node level <code>node.level</code> <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h5>

<pre class="code erb"><code class="erb">&lt;% content_for :head do %&gt;
  &lt;style&gt;
    div.children {margin-left: 1em;}
    div.node {position: relative;}
    div.node::before {
      position: absolute;
      content: &quot;&quot;;
      width: 0px;
      height: 0px;
      border-top: 5px solid transparent;
      border-bottom: 5px solid transparent;
      border-left: 8.66px solid red;
      left: -9px;
      top: 3px;
    }
  &lt;/style&gt;
&lt;% end %&gt;

&lt;div class=&quot;children&quot;&gt;
  &lt;% prev_level = nil %&gt;
  &lt;% @catalogs.to_a.to_nested.each_nested do |node, origin| %&gt;

    &lt;%# Has the level increased? - open the sublevel. %&gt;
    &lt;% if prev_level.present? &amp;&amp; prev_level &lt; node.level %&gt;
      &lt;div class=&quot;children&quot;&gt;
    &lt;% end %&gt;

    &lt;%# Same level? ‚Äî we simply close the previous one. %&gt;
    &lt;% if prev_level.present? &amp;&amp; prev_level == node.level %&gt;
      &lt;/div&gt;
    &lt;% end %&gt;

    &lt;%# Has the level dropped? - closing the previous one is difficult. %&gt;
    &lt;% if prev_level.present? &amp;&amp; prev_level &gt; node.level %&gt;
      &lt;% (prev_level - node.level).times do |t| %&gt;
        &lt;/div&gt;
        &lt;/div&gt;
      &lt;% end %&gt;
      &lt;/div&gt;
    &lt;% end %&gt;

    &lt;%# Our node. %&gt;
    &lt;div class=&quot;node&quot;&gt;
    &lt;%= origin.name %&gt;

    &lt;% prev_level = node.level %&gt;
  &lt;% end %&gt;

  &lt;%# Taking into account the previous level when exiting the cycle (Level has decreased). %&gt;
  &lt;% if !prev_level.nil? %&gt;
    &lt;% prev_level.times do |t| %&gt;
      &lt;/div&gt;
      &lt;/div&gt;
    &lt;% end %&gt;
    &lt;/div&gt;
  &lt;% end %&gt;
&lt;/div&gt;
</code></pre>

<p><img src="doc/images/2.2.1.5.png" alt="Screenshot"></p>

<h4 id="pseudo-graphic-output"><a id="2.2.2"></a>Pseudo-graphic output <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h4>

<h5 id="adding-pseudo-graphics-before-the-model-name-using-the-nested_to_options-method"><a id="2.2.2.1"></a>Adding pseudo-graphics before the model name using the <code>nested_to_options</code> method <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h5>

<pre class="code erb"><code class="erb">&lt;% options = @catalogs.to_a.to_nested.nested_to_options(:name, :id) %&gt;
&lt;pre&gt;&lt;code&gt;&lt;%= options.pluck(0).join($/) %&gt;
&lt;/code&gt;&lt;/pre&gt;
</code></pre>

<p><img src="doc/images/2.2.2.1.png" alt="Screenshot"></p>

<h5 id="thin-pseudographics"><a id="2.2.2.2"></a>Thin pseudographics <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h5>

<pre class="code erb"><code class="erb">&lt;% options = @catalogs.to_a.to_nested.nested_to_options(:name, :id, thin_pseudographic: true) %&gt;
&lt;pre&gt;&lt;code&gt;&lt;%= options.pluck(0).join($/) %&gt;
&lt;/code&gt;&lt;/pre&gt;
</code></pre>

<p><img src="doc/images/2.2.2.2.png" alt="Screenshot"></p>

<h5 id="own-pseudographics"><a id="2.2.2.3"></a>Own pseudographics <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h5>

<pre class="code erb"><code class="erb">&lt;% options = @catalogs.to_a.to_nested.nested_to_options(:name, :id, pseudographics: %w(‚î¨ ‚îÄ ‚ùá ‚îú ‚îî &amp;nbsp; ‚îÇ)) %&gt;
&lt;pre&gt;&lt;code&gt;&lt;%= options.pluck(0).join($/).html_safe %&gt;
&lt;/code&gt;&lt;/pre&gt;
</code></pre>

<p><img src="doc/images/2.2.2.3.png" alt="Screenshot"></p>

<h5 id="increase-indentation-in-own-pseudographics"><a id="2.2.2.4"></a>Increase indentation in own pseudographics <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h5>

<pre class="code erb"><code class="erb">&lt;% options = @catalogs.to_a.to_nested.nested_to_options(:name, :id, pseudographics: [&#39;‚îÄ‚î¨&#39;, &#39;‚îÄ‚îÄ&#39;, &#39;‚îÄ&amp;nbsp;&#39;, &#39;&amp;nbsp;‚îú&#39;, &#39;&amp;nbsp;‚îî&#39;, &#39;&amp;nbsp;&amp;nbsp;&#39;, &#39;&amp;nbsp;‚îÇ&#39;]) %&gt;
&lt;pre&gt;&lt;code&gt;&lt;%= options.pluck(0).join($/).html_safe %&gt;
&lt;/code&gt;&lt;/pre&gt;
</code></pre>

<p><img src="doc/images/2.2.2.4.png" alt="Screenshot"></p>

<h4 id="in-html-forms"><a id="2.2.3"></a>In html forms <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h4>

<h4 id="with-the-form-select-helper"><a id="2.2.3.1"></a>With the <code>form.select</code> helper <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h4>

<pre class="code erb"><code class="erb">&lt;%= form_with(model: Catalog.find(11), url: root_path, method: :get) do |form| %&gt;
  &lt;%= form.select :parent_id,
    @catalogs.to_a.to_nested.nested_to_options(:name, :id),
    {
      include_blank: &#39;None&#39;
    },
    {
      multiple: false,
      size: 11,
      class: &#39;form-select form-select-sm nested_array-select&#39;
    }
  %&gt;
&lt;% end %&gt;
</code></pre>

<p><img src="doc/images/2.2.3.1.png" alt="Screenshot"></p>

<h4 id="with-form-select-and-options_for_select-helpers"><a id="2.2.3.2"></a>With <code>form.select</code> and <code>options_for_select</code> helpers <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h4>

<pre class="code erb"><code class="erb">&lt;%= form_with(model: Catalog.find(11), url: root_path, method: :get) do |form| %&gt;
  &lt;%= form.select :parent_id,
    options_for_select(
      @catalogs.to_a.to_nested.nested_to_options(:name, :id).unshift([&#39;None&#39;, &#39;&#39;]),
      selected: form.object.parent_id.to_s
    ),
    {
    },
    {
      multiple: false,
      size: 11,
      class: &#39;nested_array-select&#39;
    }
  %&gt;
&lt;% end %&gt;
</code></pre>

<p><img src="doc/images/2.2.3.2.png" alt="Screenshot"></p>

<h4 id="dropdown-list-with-radio-buttons-form-radio_button"><a id="2.2.3.3"></a>Dropdown list with radio buttons <code>form.radio_button</code> <a href="#%D0%9E%D0%B3%D0%BB%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5" title="To the table of contents">‚Üë</a></h4>

<pre class="code erb"><code class="erb">&lt;%= form_with(model: nil, url: root_path, method: :get) do |form| %&gt;
  &lt;ul class=&quot;nested_array-details&quot;&gt;
    &lt;% @catalogs.to_a.to_nested.each_nested details: true do |node, origin| %&gt;
      &lt;%= node.before %&gt;
      &lt;%= form.radio_button :parent_id, origin.id %&gt;
      &lt;%= form.label :parent_id, origin.name, value: origin.id %&gt;
      &lt;small&gt;[&lt;%= origin.id %&gt;, &lt;%= origin.parent_id || :nil %&gt;, &lt;%= node.level %&gt;]&lt;/small&gt;
      &lt;%= node.after(open: node.is_has_children) %&gt;
    &lt;% end %&gt;
  &lt;/ul&gt;
&lt;% end %&gt;
</code></pre>

<p><img src="doc/images/2.2.3.3.png" alt="Screenshot"></p>

<h2 id="development">Development</h2>

<p>To connect the local version of the gem, replace the second argument(version) in
the connection line (Gemfile file) with the path option:</p>

<pre class="code rb"><code class="rb"># Working with tree arrays
gem &quot;nested_array&quot;, path: &quot;../nested_array&quot;
</code></pre>
</div></div>

      <div id="footer">
  Generated on Thu Jul 17 11:22:04 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-2.7.8).
</div>

    </div>
  </body>
</html>